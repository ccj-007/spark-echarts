(function(X,q){typeof exports=="object"&&typeof module<"u"?q(exports):typeof define=="function"&&define.amd?define(["exports"],q):(X=typeof globalThis<"u"?globalThis:X||self,q(X["spark-echarts"]={}))})(this,function(X){"use strict";function q(n,o,t,e,l,s,b,g,T){let d=[],h=n+(t-n)*2/3,P=o+(e-o)*2/3,E=b+(l-b)*2/3,x=g+(s-g)*2/3;for(let K=0;K<=T;K++){let r=K/T,M=(1-r)*(1-r)*(1-r)*n+3*r*(1-r)*(1-r)*h+3*r*r*(1-r)*E+r*r*r*b,Ye=(1-r)*(1-r)*(1-r)*o+3*r*(1-r)*(1-r)*P+3*r*r*(1-r)*x+r*r*r*g;d.push({x:+M.toFixed(2),y:+Ye.toFixed(2)})}return d}function ve(n){let o=[];for(let t=0;t<n.length;t++){let e=n[t],l=50;if(e.type==="line"){let s=e.start.x,b=e.start.y,g=e.end.x,T=e.end.y;for(let d=0;d<=l;d++){let h=d/l,P=s+(g-s)*h,E=b+(T-b)*h;o.push({x:+P.toFixed(2),y:+E.toFixed(2)})}}else if(e.type==="curve"){let s=e.start.x,b=e.start.y,g=e.control1.x,T=e.control1.y,d=e.control2.x,h=e.control2.y,P=e.end.x,E=e.end.y;const x=q(s,b,g,T,d,h,P,E,l);o.push(...x)}}return o}function be(n){return ve(n)}function Ce(n,o=0,t=0,e=10,l="#000"){n.beginPath(),n.arc(o,t,e,0,Math.PI*2),n.fillStyle=l,n.fill(),n.closePath()}const C={layout:{root:"#container",m:40},data:[[40,60,40,80,10,50,80,0,50,30,20],[20,30,60,40,30,10,30,20,0,30,20],[20,30,20,40,20,10,10,30,0,30,50]],axisX:{data:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],format(n){return n+"w"},top:4},axisY:{data:[0,20,40,60,80],format(n){return n+"人"},right:10},series:[{rgba:[[55,162,255],[116,21,219]],hoverRgba:[[55,162,255],[116,21,219]],lineColor:"blue"},{rgba:[[255,0,135],[135,0,157]],hoverRgba:[[255,0,135],[135,0,157]],lineColor:"purple"},{rgba:[[255,190,0],[224,62,76]],hoverRgba:[[255,190,0],[224,62,76]],lineColor:"orange"}]},pe={removeChild(n,o){for(const t of o)t&&n.removeChild(t)},throttle(n,o,t){let e=0;return()=>{const l=new Date().getTime();l-e>o&&(n.apply(t,arguments),e=l)}}};let f,L,i,y,u,p,S,F,Q=[],m=C,z=[],U=[],B=[],ae=0,k=0,Z=0,Y=0,le=0,re=0,se=0,ce=0,de=0,he=0,D=0,A=0,_=0,w=0,ee=0,$=0,R=0,a=0,v=0,c=0,fe=!1,G=[],I=[],O=[],H=0,te=0,j=!0,ne=!1,ie=-1,W=[],N=[],V={x:0,y:0},ue=0,J=0,oe=0;function we(n){if(!n.layout.root)throw new Error("your root is must be exist");m=Object.assign(Object.create(null),n);let{layout:{root:o,m:t}}=m;console.log(t),a=t,Q=n.data,p=document.querySelector(o),f=document.createElement("canvas"),L=document.createElement("canvas"),S=document.createElement("canvas"),p&&(f.id="myCanvas",L.id="myCanvasDot",S.id="markCanvas",i=f.getContext("2d"),y=L.getContext("2d"),F=S.getContext("2d"),S.width=L.width=f.width=p.offsetWidth,f.height=S.height=L.height=p.offsetHeight,p.appendChild(f),p.appendChild(L),p.appendChild(S),z=[],U=[],B=Q.flat(),v=f.width,c=f.height,ae=Math.max.apply(null,B),k=Math.min.apply(null,B),Z=ae-k,Y=(c-2*a)/Z,le=B.length,re=v-2*a,se=1,ce=se*a,de=Q.length,he=re/(le-de),D=he,A=0,_=0,w=0,ee=0,$=0,R=0)}function Te(){i.beginPath(),i.moveTo(a,a),i.lineTo(a,c-a),i.lineTo(v-a+2,c-a),i.setLineDash([3,3]),i.strokeStyle="#aaa",i.stroke(),i.setLineDash([1]);const n=m.axisY.data.length,o=m.axisX.data.length;for(let t=0;t<n;t++){let e=Z*t/(n-1)+k,l=c-a-(e-k)*Y;t&&(i.beginPath(),i.moveTo(a,l),i.lineTo(v-a,l),i.strokeStyle="#ddd",i.stroke()),i.beginPath(),i.stroke(),G=[];for(const s of C.axisY.data)G.push(C.axisY.format(s));i.fillText(G[t]+"",a-15-C.axisY.right,l+5),j&&N.push(l+5)}for(let t=0;t<o;t++){let e=t*D,l=a+e;t&&(i.beginPath(),i.moveTo(l,c-a),i.lineTo(l,a),i.strokeStyle="#ddd",i.stroke()),I=[];for(const s of C.axisX.data)I.push(C.axisX.format(s));i.fillText(I[t],l-1,c-a+10+C.axisX.top),j&&W.push(l-1)}}function Pe(n){const{points:o,id:t,rgba:e,lineColor:l,hoverRgba:s}=n;A=w,_=ee,j&&O.push({x:A,y:_});function b(T){i.beginPath(),i.moveTo(t?a+w-ce:a+w,c-a-(o[0]-k)*Y),i.lineWidth=2,i.setLineDash([0,0]);let d=0,h=0,P=0;t&&(P-=a);for(let x=0;x<o.length;x++){d=x*D+a+w+P,h=c-a-(o[x]-k)*Y;let K=(x-1)*D+a+w+P,r=c-a-(o[x-1]-k)*Y,M=K+D/2;x===0?($=d,R=h,i.lineTo(d,h),$===d&&R===h||z.push({type:"line",start:{x:$,y:R},end:{x:d,y:h}})):(i.bezierCurveTo(M,r,M,h,d,h),z.push({type:"curve",start:{x:$,y:R},end:{x:d,y:h},control1:{x:M,y:r},control2:{x:M,y:h}})),$=d,R=h,x===o.length-1&&(w=d,ee=h,j&&t===m.data.length-1&&O.push({x:d,y:h}))}i.strokeStyle=l,i.stroke(),T&&i.beginPath(),i.lineTo(w,c-a),i.lineTo(a+A,c-a);let E=t?A:a+A;i.lineTo(E,c-a),i.strokeStyle="transparent",T&&i.stroke()}b(!1);const g=i.createLinearGradient(200,110,200,290);ne&&ie===t?(g.addColorStop(0,`rgba(${s[1][0]}, ${s[1][1]}, ${s[1][2]}, 1)`),g.addColorStop(1,`rgba(${s[0][0]}, ${s[0][1]}, ${s[0][2]}, 1)`)):(g.addColorStop(0,`rgba(${e[1][0]}, ${e[1][1]}, ${e[1][2]}, 1)`),g.addColorStop(1,`rgba(${e[0][0]}, ${e[0][1]}, ${e[0][2]}, 0)`)),i.fillStyle=g,i.fill()}function ke(){const{data:n,series:o}=m;for(let t=0;t<n.length;t++)Pe({points:n[t],id:t,rgba:o[t].rgba,hoverRgba:o[t].hoverRgba,lineColor:o[t].lineColor});j=!1}function Le(n,o){H=n,te=o;for(let e=0;e<O.length-1;e++){const l=O[e].x,s=O[e+1].x;H>l&&H<s&&(ie=e)}for(let e=0;e<W.length-1;e++){const l=W[e],s=W[e+1];H>l&&H<s&&(V.x=e)}for(let e=0;e<N.length-1;e++){const l=N[e],s=N[e+1];te<l&&te>s&&(V.y=e+1)}let t=U.find(e=>Math.abs(e.x-n)<=.5?e:"");if(t&&f){if(y.clearRect(0,0,f.width,f.height),y.beginPath(),y.setLineDash([2,4]),y.moveTo(t.x,a),y.lineTo(t.x,c-a),y.strokeStyle="#000",y.stroke(),Ce(y,t.x,t.y,5),!fe)u=document.createElement("div"),u.id="canvasTopBox",u.innerHTML="",p&&p.appendChild(u),fe=!0;else if(u){let e=t.y+u.offsetHeight>f.height-a?f.height-a-u.offsetHeight:t.y-u.offsetHeight*.5;u.style.left=t.x+20+"px",u.style.top=e+"px",u.innerHTML=`
         <div class='label'>
           <div class='label-left' style='backGround: ${m.series[ie].lineColor}'>
           </div>
          <div class='label-right'>
            <div class='label-text'>人数:${G[V.y]} </div>
            <div class='label-text'>订单数:${I[V.x]} </div>
          </div>
         </div>
        `}}}function Se(n){console.log("ASASASD");const{left:o,top:t,width:e,height:l}=p.getBoundingClientRect();n.clientX>o&&n.clientX<e+o&&n.clientY>t&&n.clientY<l+t?(ge(m,{openAnimate:!1}),Le(n.clientX,n.clientY),ne=!0,u&&(u.style.display="block")):(f&&y.clearRect(0,0,f.width,f.height),ne=!1,ge(m),u&&(u.style.display="none"))}function Ae(){Re()}const $e=pe.throttle(Ae,50,window);function xe(){window.addEventListener("mousemove",Se),window.addEventListener("resize",$e)}function ge(n,o){i.clearRect(0,0,v,c),y.clearRect(0,0,v,c),p&&pe.removeChild(p,[f,L,S]),me(n,o)}function Re(){Q=[],m=C,z=[],U=[],B=[],ae=0,k=0,Z=0,Y=0,le=0,re=0,se=0,ce=0,de=0,he=0,D=0,A=0,_=0,w=0,ee=0,$=0,R=0,a=0,v=0,c=0,fe=!1,G=[],I=[],O=[],H=0,te=0,j=!0,ne=!1,ie=-1,W=[],N=[],V={x:0,y:0},ue=0,J=0,oe=0,ge(m,{openAnimate:!1})}function ye(){F.clearRect(0,0,v,c),F.fillStyle="rgba(255, 255, 255, 1)",F.fillRect(0,0,v,c),F.clearRect(v-J,c-oe,J,oe),J+=20,oe+=20,J<v?ue=requestAnimationFrame(ye):(cancelAnimationFrame(ue),xe())}function me(n,o={openAnimate:!0}){we(n),Te(),o.openAnimate&&ye(),ke(),U=be(z),o.openAnimate||xe()}function Ee(n){me(n)}const De="",Xe={line:n=>{const o=Object.create(null);Object.assign(o,C,n),Ee(o)}};X.graph=Xe,Object.defineProperty(X,Symbol.toStringTag,{value:"Module"})});
